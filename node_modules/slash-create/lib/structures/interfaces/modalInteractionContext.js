"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModalInteractionContext = void 0;
const messageInteraction_1 = require("./messageInteraction");
/** Represents an interaction context from a modal submission. */
class ModalInteractionContext extends messageInteraction_1.MessageInteractionContext {
    /**
     * @param creator The instantiating creator.
     * @param data The interaction data for the context.
     * @param respond The response function for the interaction.
     * @param useTimeout Whether to use the deferral timeout.
     */
    constructor(creator, data, respond, useTimeout = true) {
        super(creator, data, respond);
        this.customID = data.data.custom_id;
        this.values = ModalInteractionContext.convertComponents(data.data.components);
        // Auto-defer if no response was given in 2 seconds
        if (useTimeout)
            this._timeout = setTimeout(() => this.defer(false), 2000);
    }
    static convertComponents(components) {
        const values = {};
        for (const row of components) {
            const component = row.components[0];
            values[component.custom_id] = component.value;
        }
        return values;
    }
}
exports.ModalInteractionContext = ModalInteractionContext;
